# üé¨ Movie Explorer: Hybrid SQL & NoSQL Analytics

**Course:** Database Systems Final Project
**Team Members:** [Your Name], [Partner's Name]

---

## üìñ Project Overview
This project analyzes IMDb movie data using a hybrid architecture. It combines **MySQL** for structured relational data processing and **MongoDB** for flexible, denormalized document storage.

We also built an interactive **Python Streamlit App** to visualize the data and run live queries.

---

## üèóÔ∏è Part 1: SQL Implementation (MySQL)

We designed a normalized relational schema to handle core movie data efficiently.

### 1. Database Schema
* **Structure:** 4 Tables (`movies`, `people`, `ratings`, `principals`).
* **Design:** Normalized to 3NF to reduce redundancy.
* **Visuals:** Please refer to the provided **ER.png** and **Architecture Diagram.png** for the detailed schema design.

### 2. Data Import Strategy
Unlike standard imports, we developed a Python script (`csv_to_insert_sql.py`) to parse raw CSV files and generate optimized SQL `INSERT` statements. This ensures data integrity before loading it into MySQL.

### 3. Key SQL Features (Implemented in `analysis_queries.sql`)
* **View:** `vw_movie_ratings` combines movies and ratings.
* **Stored Procedure:** `GetTopMoviesByGenreYear` allows parameterized querying.
* **Complex Analysis:** Queries utilizing CTEs and Joins to find top collaborations.

---

## üçÉ Part 2: NoSQL Implementation (MongoDB)

We used MongoDB to create **"Movie Profiles"**, aggregating scattered data into single documents for high-performance reading.

### 1. ETL & Data Cleaning (Pre-processing)
Raw data contained missing values (e.g., `\N`) and formatting issues. We wrote an ETL pipeline (documented in `mongo_queries.js`) to:
* Clean missing values.
* Convert data types (String to Int/Double).
* Merge data using `$lookup` into a single denormalized structure.
* **Result:** The final cleaned dataset is saved as `MovieExplorer.movies_master.json`.

*(For the visual structure of the JSON document, please refer to **Structure.png**)*.

### 2. Analytical Queries
We implemented three key types of NoSQL queries (code provided in `mongo_queries.js`):
1.  **Filter Queries:** Finding high-rated recent movies (Year > 2015).
2.  **Text Search:** Full-text indexing on titles to support keyword search (e.g., "Love").
3.  **Aggregation Pipeline:** Calculating average ratings per genre using `$unwind` and `$group`.

*(Please refer to **Rating.png** to see the execution result of the aggregation query)*.

---

## üöÄ How to Run / Installation

### Prerequisites
* MySQL Server & MongoDB (Compass)
* Python 3.x
* Required libs: `pip install streamlit pandas sqlalchemy mysql-connector-python`

### 1Ô∏è‚É£ SQL Setup (MySQL)
1.  **Create Schema:** Run `movie_explorer.sql` in your MySQL client to create the tables.
2.  **Generate Data:** Run the Python script to generate insert statements from raw data:
    ```bash
    python csv_to_insert_sql.py
    ```
3.  **Import Data:** Execute the `.sql` files generated by the script above to populate the database.
4.  **Create Objects:** Run `analysis_queries.sql` to set up Views and Stored Procedures.
5.  **(Optional) GUI:** Run `streamlit run app.py` to launch the interface.

### 2Ô∏è‚É£ NoSQL Setup (MongoDB)
1.  **Import Cleaned Data:**
    * Open MongoDB Compass.
    * Create DB: `movie_explorer`, Collection: `movies_master`.
    * Import `MovieExplorer.movies_master.json` (Select **JSON** format).
2.  **Rebuild Index:**
    * The text index is not preserved in JSON export. Run this in Mongosh or Compass Shell:
    ```javascript
    db.movies_master.createIndex({ title: "text" })
    ```
3.  **Review Logic:**
    * Open `mongo_queries.js` to view the ETL pipeline code used to clean the data and the analytical queries mentioned above.

---

## üìÇ File Manifest

* `app.py` - Streamlit GUI application.
* `csv_to_insert_sql.py` - Python script to generate SQL inserts from CSVs.
* `movie_explorer.sql` - Database schema definition (DDL).
* `analysis_queries.sql` - Advanced SQL queries (Views, CTEs, Procedures).
* `mongo_queries.js` - Contains the ETL pipeline logic and NoSQL analytical queries.
* `MovieExplorer.movies_master.json` - Final cleaned NoSQL dataset (Import this one).v
